<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Dogma Interactive | DNA ‚Üí RNA ‚Üí Protein</title>
    <style>
        /* Basic styling */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .process-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .process-step {
            padding: 15px 25px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .process-step:hover {
            transform: translateY(-5px);
        }
        
        .process-step.dna { border-left: 5px solid #e74c3c; }
        .process-step.rna { border-left: 5px solid #3498db; }
        .process-step.protein { border-left: 5px solid #2ecc71; }
        
        .arrow {
            font-size: 2rem;
            color: #7f8c8d;
        }
        
        .input-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .input-section h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .dna-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: monospace;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: border-color 0.3s ease;
            margin-bottom: 15px;
        }
        
        .dna-input:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .dna-input.valid {
            border-color: #27ae60;
            background-color: #f8fff8;
        }
        
        .dna-input.invalid {
            border-color: #e74c3c;
            background-color: #fff8f8;
        }
        
        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            padding: 10px 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .preset-btn:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }
        
        .sequence-info {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            font-family: monospace;
            margin-bottom: 20px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn.primary {
            background: #3498db;
            color: white;
        }
        
        .btn.success {
            background: #27ae60;
            color: white;
        }
        
        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .simulation-area {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .phase {
            padding: 15px 25px;
            border-radius: 25px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
        }
        
        .phase.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .canvas-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            min-height: 400px;
            background: #fafafa;
            position: relative;
            overflow: hidden;
        }
        
        .sequence-displays {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .sequence-item {
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .sequence-label {
            font-weight: bold;
            display: inline-block;
            width: 80px;
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .process-flow {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .controls {
                justify-content: center;
            }
            
            .phase-indicator {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üß¨ Central Dogma Interactive</h1>
            <p>Learn how genetic information flows from DNA to RNA to Proteins</p>
            
            <div class="process-flow">
                <div class="process-step dna">
                    <strong>DNA</strong><br>
                    Genetic Blueprint
                </div>
                <div class="arrow">‚Üí</div>
                <div class="process-step rna">
                    <strong>RNA</strong><br>
                    Messenger Copy
                </div>
                <div class="arrow">‚Üí</div>
                <div class="process-step protein">
                    <strong>Protein</strong><br>
                    Functional Product
                </div>
            </div>
        </div>
        
        <!-- Input Section -->
        <div class="input-section">
            <h2>üìù Enter DNA Sequence</h2>
            <textarea 
                id="dna-input" 
                class="dna-input" 
                placeholder="Enter DNA sequence (A, T, G, C only) - Example: ATGGTTTTAAGCGTAA"
                rows="3"
            ></textarea>
            
            <div class="sequence-info" id="sequence-info">
                Enter a DNA sequence to begin...
            </div>
            
            <div class="preset-buttons">
                <button class="preset-btn" data-sequence="ATGGTTTTAAGCGTAA">
                    Simple Example (16 bases)
                </button>
                <button class="preset-btn" data-sequence="ATGAAAGAACGCATCGCCAAGAACTTCAAGGAGTAA">
                    Insulin Fragment (36 bases)
                </button>
                <button class="preset-btn" data-sequence="ATGGCAGACCTTTCGCTGAAGCTTGACAAGGAACCCGGCGAGTAA">
                    Beta-Globin Fragment (45 bases)
                </button>
            </div>
        </div>
        
        <!-- Simulation Area -->
        <div class="simulation-area">
            <h2>üé¨ Central Dogma Simulation</h2>
            
            <div class="controls">
                <button id="start-btn" class="btn primary" disabled>
                    <span>‚ñ∂Ô∏è</span> Start Simulation
                </button>
                <button id="reset-btn" class="btn" onclick="resetSimulation()">
                    <span>üîÑ</span> Reset
                </button>
                <button id="export-btn" class="btn" onclick="exportResults()" disabled>
                    <span>üíæ</span> Export Results
                </button>
            </div>
            
            <div class="phase-indicator">
                <div class="phase active" id="transcription-phase">
                    1. Transcription (DNA ‚Üí RNA)
                </div>
                <div class="phase" id="translation-phase">
                    2. Translation (RNA ‚Üí Protein)
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div id="status" class="status info">
                Ready to begin - Enter a valid DNA sequence above
            </div>
            
            <div class="canvas-container" id="animation-canvas">
                <div style="display: flex; align-items: center; justify-content: center; height: 400px; color: #7f8c8d;">
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">üß¨</div>
                        <p>Animation will appear here when you start the simulation</p>
                    </div>
                </div>
            </div>
            
            <div class="sequence-displays">
                <div class="sequence-item">
                    <span class="sequence-label">DNA:</span>
                    <code id="dna-display">Not entered</code>
                </div>
                <div class="sequence-item">
                    <span class="sequence-label">mRNA:</span>
                    <code id="rna-display">Not transcribed</code>
                </div>
                <div class="sequence-item">
                    <span class="sequence-label">Protein:</span>
                    <code id="protein-display">Not translated</code>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Simple genetic code table
        const CODON_TABLE = {
            'UUU': 'Phe', 'UUC': 'Phe', 'UUA': 'Leu', 'UUG': 'Leu',
            'UCU': 'Ser', 'UCC': 'Ser', 'UCA': 'Ser', 'UCG': 'Ser',
            'UAU': 'Tyr', 'UAC': 'Tyr', 'UAA': 'Stop', 'UAG': 'Stop',
            'UGU': 'Cys', 'UGC': 'Cys', 'UGA': 'Stop', 'UGG': 'Trp',
            'CUU': 'Leu', 'CUC': 'Leu', 'CUA': 'Leu', 'CUG': 'Leu',
            'CCU': 'Pro', 'CCC': 'Pro', 'CCA': 'Pro', 'CCG': 'Pro',
            'CAU': 'His', 'CAC': 'His', 'CAA': 'Gln', 'CAG': 'Gln',
            'CGU': 'Arg', 'CGC': 'Arg', 'CGA': 'Arg', 'CGG': 'Arg',
            'AUU': 'Ile', 'AUC': 'Ile', 'AUA': 'Ile', 'AUG': 'Met',
            'ACU': 'Thr', 'ACC': 'Thr', 'ACA': 'Thr', 'ACG': 'Thr',
            'AAU': 'Asn', 'AAC': 'Asn', 'AAA': 'Lys', 'AAG': 'Lys',
            'AGU': 'Ser', 'AGC': 'Ser', 'AGA': 'Arg', 'AGG': 'Arg',
            'GUU': 'Val', 'GUC': 'Val', 'GUA': 'Val', 'GUG': 'Val',
            'GCU': 'Ala', 'GCC': 'Ala', 'GCA': 'Ala', 'GCG': 'Ala',
            'GAU': 'Asp', 'GAC': 'Asp', 'GAA': 'Glu', 'GAG': 'Glu',
            'GGU': 'Gly', 'GGC': 'Gly', 'GGA': 'Gly', 'GGG': 'Gly'
        };
        
        // Application state
        let currentSequences = {
            dna: '',
            rna: '',
            protein: []
        };
        
        let simulationRunning = false;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            const dnaInput = document.getElementById('dna-input');
            const startBtn = document.getElementById('start-btn');
            
            // Input validation
            dnaInput.addEventListener('input', function(e) {
                let value = e.target.value.toUpperCase();
                // Remove invalid characters
                value = value.replace(/[^ATGC]/g, '');
                e.target.value = value;
                
                validateSequence(value);
            });
            
            // Preset buttons
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sequence = this.dataset.sequence;
                    dnaInput.value = sequence;
                    validateSequence(sequence);
                });
            });
            
            // Start button
            startBtn.addEventListener('click', startSimulation);
        });
        
        function validateSequence(sequence) {
            const info = document.getElementById('sequence-info');
            const input = document.getElementById('dna-input');
            const startBtn = document.getElementById('start-btn');
            
            if (!sequence) {
                info.textContent = 'Enter a DNA sequence to begin...';
                input.className = 'dna-input';
                startBtn.disabled = true;
                return;
            }
            
            const length = sequence.length;
            const hasStartCodon = sequence.includes('ATG');
            const isDivisibleBy3 = length % 3 === 0;
            const isValidLength = length >= 6;
            
            let infoText = `Length: ${length} bases`;
            
            if (!isDivisibleBy3) {
                infoText += ' ‚ö†Ô∏è Length must be divisible by 3';
            }
            
            if (!hasStartCodon) {
                infoText += ' ‚ö†Ô∏è No start codon (ATG) found';
            }
            
            if (!isValidLength) {
                infoText += ' ‚ö†Ô∏è Minimum length is 6 bases';
            }
            
            const isValid = hasStartCodon && isDivisibleBy3 && isValidLength;
            
            if (isValid) {
                infoText += ` | ${length / 3} codons | ‚úÖ Valid sequence`;
                input.className = 'dna-input valid';
                startBtn.disabled = false;
            } else {
                input.className = 'dna-input invalid';
                startBtn.disabled = true;
            }
            
            info.textContent = infoText;
        }
        
        function startSimulation() {
            if (simulationRunning) return;
            
            const dnaSequence = document.getElementById('dna-input').value;
            if (!dnaSequence) return;
            
            simulationRunning = true;
            currentSequences.dna = dnaSequence;
            
            updateStatus('Starting transcription: DNA ‚Üí RNA', 'info');
            updateSequenceDisplay('dna', dnaSequence);
            
            // Disable start button
            document.getElementById('start-btn').disabled = true;
            
            // Start transcription
            setTimeout(() => runTranscription(), 1000);
        }
        
        function runTranscription() {
            updateStatus('Transcription in progress...', 'info');
            updateProgress(25);
            
            // Convert DNA to RNA (T ‚Üí U)
            const rnaSequence = currentSequences.dna.replace(/T/g, 'U');
            currentSequences.rna = rnaSequence;
            
            // Animate transcription
            animateTranscription(() => {
                updateSequenceDisplay('rna', rnaSequence);
                updateStatus('Transcription complete! Starting translation...', 'success');
                updateProgress(50);
                
                // Activate translation phase
                document.getElementById('transcription-phase').classList.remove('active');
                document.getElementById('translation-phase').classList.add('active');
                
                setTimeout(() => runTranslation(), 1500);
            });
        }
        
        function runTranslation() {
            updateStatus('Translation in progress: RNA ‚Üí Protein', 'info');
            updateProgress(75);
            
            // Translate RNA to protein
            const protein = translateRNA(currentSequences.rna);
            currentSequences.protein = protein;
            
            // Animate translation
            animateTranslation(() => {
                updateSequenceDisplay('protein', protein.join('-'));
                updateStatus('Translation complete! Protein synthesis finished.', 'success');
                updateProgress(100);
                
                // Enable export
                document.getElementById('export-btn').disabled = false;
                
                simulationRunning = false;
            });
        }
        
        function translateRNA(rnaSequence) {
            const protein = [];
            
            // Find start codon
            const startIndex = rnaSequence.indexOf('AUG');
            if (startIndex === -1) return protein;
            
            // Translate from start codon
            for (let i = startIndex; i < rnaSequence.length - 2; i += 3) {
                const codon = rnaSequence.substring(i, i + 3);
                const aminoAcid = CODON_TABLE[codon];
                
                if (aminoAcid === 'Stop') {
                    break;
                }
                
                if (aminoAcid) {
                    protein.push(aminoAcid);
                }
            }
            
            return protein;
        }
        
        function animateTranscription(callback) {
            const canvas = document.getElementById('animation-canvas');
            canvas.innerHTML = `
                <div style="padding: 40px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 20px;">üß¨ ‚Üí üß¨</div>
                    <h3>Transcription: DNA ‚Üí mRNA</h3>
                    <p style="margin: 20px 0;">RNA polymerase reads the DNA template strand and synthesizes complementary mRNA</p>
                    <div style="font-family: monospace; font-size: 1.2rem; margin: 20px 0;">
                        <div>DNA: ${currentSequences.dna}</div>
                        <div style="color: #3498db; margin-top: 10px;">mRNA: ${currentSequences.dna.replace(/T/g, 'U')}</div>
                    </div>
                    <div style="margin-top: 30px;">
                        <div class="progress-bar" style="width: 300px; margin: 0 auto;">
                            <div class="progress-fill" style="width: 100%; animation: fill 3s ease-in-out;"></div>
                        </div>
                    </div>
                </div>
                <style>
                    @keyframes fill {
                        0% { width: 0%; }
                        100% { width: 100%; }
                    }
                </style>
            `;
            
            setTimeout(callback, 3500);
        }
        
        function animateTranslation(callback) {
            const canvas = document.getElementById('animation-canvas');
            canvas.innerHTML = `
                <div style="padding: 40px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 20px;">üß¨ ‚Üí ‚öôÔ∏è ‚Üí üîó</div>
                    <h3>Translation: mRNA ‚Üí Protein</h3>
                    <p style="margin: 20px 0;">Ribosomes read mRNA codons and assemble amino acids into proteins</p>
                    <div style="font-family: monospace; font-size: 1.2rem; margin: 20px 0;">
                        <div style="color: #3498db;">mRNA: ${currentSequences.rna}</div>
                        <div style="color: #2ecc71; margin-top: 10px;">Protein: ${currentSequences.protein.join(' ‚Üí ')}</div>
                    </div>
                    <div style="margin-top: 30px;">
                        <div class="progress-bar" style="width: 300px; margin: 0 auto;">
                            <div class="progress-fill" style="width: 100%; animation: fill 4s ease-in-out;"></div>
                        </div>
                    </div>
                </div>
                <style>
                    @keyframes fill {
                        0% { width: 0%; }
                        100% { width: 100%; }
                    }
                </style>
            `;
            
            setTimeout(callback, 4500);
        }
        
        function updateStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }
        
        function updateProgress(percentage) {
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = percentage + '%';
        }
        
        function updateSequenceDisplay(type, sequence) {
            const display = document.getElementById(type === 'rna' ? 'rna-display' : (type === 'protein' ? 'protein-display' : 'dna-display'));
            display.textContent = sequence || 'Not available';
        }
        
        function resetSimulation() {
            simulationRunning = false;
            
            // Reset progress
            updateProgress(0);
            
            // Reset phases
            document.getElementById('transcription-phase').classList.add('active');
            document.getElementById('translation-phase').classList.remove('active');
            
            // Reset displays
            updateSequenceDisplay('dna', 'Not entered');
            updateSequenceDisplay('rna', 'Not transcribed');
            updateSequenceDisplay('protein', 'Not translated');
            
            // Reset canvas
            document.getElementById('animation-canvas').innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 400px; color: #7f8c8d;">
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">üß¨</div>
                        <p>Animation will appear here when you start the simulation</p>
                    </div>
                </div>
            `;
            
            // Reset status
            updateStatus('Ready to begin - Enter a valid DNA sequence above', 'info');
            
            // Reset buttons
            document.getElementById('start-btn').disabled = document.getElementById('dna-input').value ? false : true;
            document.getElementById('export-btn').disabled = true;
            
            // Clear sequences
            currentSequences = { dna: '', rna: '', protein: [] };
        }
        
        function exportResults() {
            if (!currentSequences.dna) {
                alert('No simulation results to export');
                return;
            }
            
            const data = {
                timestamp: new Date().toISOString(),
                sequences: currentSequences,
                protein_sequence: currentSequences.protein.join('-'),
                statistics: {
                    dna_length: currentSequences.dna.length,
                    rna_length: currentSequences.rna.length,
                    protein_length: currentSequences.protein.length,
                    codons_translated: currentSequences.protein.length
                }
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `central-dogma-results-${new Date().toISOString().slice(0, 19)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            URL.revokeObjectURL(url);
            
            updateStatus('Results exported successfully!', 'success');
        }
    </script>
</body>
</html>
